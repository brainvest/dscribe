<h1 mat-dialog-title>{{data.isNew ? 'New' : 'Edit'}} App instance</h1>

<mat-dialog-content>
	<form #entityTypeForm="ngForm">
		<mat-form-field class="full-width" appearance="outline">
			<mat-label>Name</mat-label>
			<input matInput type="text" placeholder="Name" name="name" [(ngModel)]="appInstance.Name" required>
			<p class="form-error-message" *ngFor="let e of appInstanceError?.Name">
				{{e}}
			</p>
		</mat-form-field>

		<mat-form-field class="full-width" appearance="outline">
			<mat-label>Title</mat-label>
			<input matInput type="text" placeholder="Title" name="title" [(ngModel)]="appInstance.Title">
			<p class="form-error-message" *ngFor="let e of appInstanceError?.Title">
				{{e}}
			</p>
		</mat-form-field>

		<mat-form-field class="full-width" appearance="outline">
			<mat-label>App type</mat-label>
			<mat-select name="appType" placeholder="App Type" [(ngModel)]="appInstance.AppTypeId" [required]="true">
				<mat-option *ngFor="let appType of appTypes" [value]="appType.Id">
					{{appType.Name}}
				</mat-option>
			</mat-select>
			<p class="form-error-message" *ngFor="let e of appInstanceError?.AppTypeId">
				{{e}}
			</p>
		</mat-form-field>

		<mat-form-field class="full-width" appearance="outline">
			<mat-label>Database Provider</mat-label>
			<mat-select name="databaseProvider" placeholder="Database provider" [(ngModel)]="appInstance.DatabaseProviderId"
			 [required]="true">
				<mat-option *ngFor="let databaseProvider of databaseProviders" [value]="databaseProvider.Id">
					{{databaseProvider.Name}}
				</mat-option>
			</mat-select>
			<p class="form-error-message" *ngFor="let e of appInstanceError?.DatabaseProviderId">
				{{e}}
			</p>
        </mat-form-field>
        
		<mat-form-field class="full-width" appearance="outline">
			<mat-label>Data Connection String</mat-label>
			<input matInput type="text" placeholder="Title" name="title" [(ngModel)]="appInstance.DataConnectionString">
			<p class="form-error-message" *ngFor="let e of appInstanceError?.DataConnectionString">
				{{e}}
			</p>
		</mat-form-field>

		<mat-form-field class="full-width" appearance="outline">
			<mat-label>LOB Connection String</mat-label>
			<input matInput type="text" placeholder="Title" name="title" [(ngModel)]="appInstance.LobConnectionString">
			<p class="form-error-message" *ngFor="let e of appInstanceError?.LobConnectionString">
				{{e}}
			</p>
		</mat-form-field>

        <div>
			<mat-checkbox name="isEnabled" [(ngModel)]="appInstance.IsEnabled">Is Enable</mat-checkbox>
		</div>
		<div>
			<mat-checkbox name="isProduction" [(ngModel)]="appInstance.IsProduction">Is Production</mat-checkbox>
        </div>
        <div>
			<mat-checkbox name="migrateDatabase" [(ngModel)]="appInstance.MigrateDatabase">Migrate Database</mat-checkbox>
		</div>
	</form>

</mat-dialog-content>

<mat-dialog-actions>
	<button mat-icon-button (click)="save()" *ngIf="!submitLoading">
		<mat-icon color="primary">save</mat-icon>
	</button>
	<button mat-icon-button *ngIf="submitLoading">
		<mat-spinner style="margin-left: 10px;" [diameter]="20" color="accent"></mat-spinner>
	</button>
	<button mat-icon-button (click)="cancel()" [disabled]="submitLoading">
		<mat-icon color="warn">cancel</mat-icon>
	</button>
</mat-dialog-actions>
